"use strict";jQuery(document).ready((function(a){var t=a(".school-price-calculator__button");t.length>0&&t.on("click",(function(){var t=a(this),r=t.text(),e=t.attr("data-label"),l=t.parent().parent().parent(),o=l.find(".school-price-calculator__error-message").first(),c=l.find(".per-month i").first(),s=l.find(".per-year i").first();if(t.hasClass("school-price-calculator__button--recalculate"))t.html(e).attr("data-label",r).removeClass("school-price-calculator__button--recalculate"),l.removeClass("school-price-calculator--end-calculation").removeClass("school-price-calculator--error-api"),o.text(""),c.text(""),s.text("");else{var i=l.find('input[name="without_aid"]').first().is(":checked"),n=l.find('input[name="students_number"]'),u=l.find('input[name="household_income"]'),d={},p="undefined"!=typeof spcSettings&&void 0!==spcSettings.mainSiteUrl?spcSettings.mainSiteUrl:window.location.origin;if(l.find("input").removeClass("error"),a(l).hasClass("school-price-calculator--start-calculation"))return;if(!n.val())return void n.addClass("error");if(!u.val()&&!i)return void u.addClass("error");i?(d={students_number:n.val()},p+="/wp-json/school-price-calculator/v1/education-prices-without-aid"):(d={students_number:n.val(),household_income:u.val()},p+="/wp-json/school-price-calculator/v1/education-prices"),jQuery.ajax({method:"GET",dataType:"json",url:p,data:d,beforeSend:function(){t.html(e).attr("data-label",r).addClass("school-price-calculator__button--recalculate"),a(l).addClass("school-price-calculator--start-calculation")},error:function(t){var r=t.responseJSON.message;a(l).removeClass("school-price-calculator--start-calculation"),a(l).removeClass("school-price-calculator--start-calculation").addClass("school-price-calculator--end-calculation").addClass("school-price-calculator--error-api"),o.text(r)},success:function(o){t.html(e).attr("data-label",r).addClass("school-price-calculator__button--recalculate"),a(l).removeClass("school-price-calculator--start-calculation").addClass("school-price-calculator--end-calculation"),c.text(o.price_per_month),s.text(o.price_per_year)}})}}));var r=a('input[name="without_aid"]');r.length>0&&r.on("click",(function(){var t=a(this).parent().parent().find('input[name="household_income"]');t.length>0&&(t.first().parent().toggleClass("school-price-calculator__row--disabled"),t.removeClass("error"),t.attr("readonly")?t.removeAttr("readonly"):t.attr("readonly","readonly"))}));var e=a(".school-price-calculator__input-text--only-numbers");e.length>0&&e.on("input",(function(t){var r=a(this).val(),e=r.replace(/[^0-9]/gi,"");return r===e?(a(this).removeClass("error"),!0):(a(this).addClass("error").val(e),!1)}));var l=a(".school-price-calculator__input-text--only-float");l.length>0&&l.on("input",(function(t){var r=a(this).val(),e=r.split(".").length-1,l=r.replace(/[^0-9|^.]/gi,"");return e>1&&(l=l.replace(/.$/,"")),r===l?(a(this).removeClass("error"),!0):(a(this).addClass("error").val(l),!1)}))}));